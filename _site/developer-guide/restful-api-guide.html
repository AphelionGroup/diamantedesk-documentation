<p>DiamanteDesk REST APIs enable interaction between the application and other software products, such as websites, CRMs, content management systems and other applications. Using the DiamanteDesk REST APIs you can read, modify, add and delete the data directly in the helpdesk.</p>

<p>To ensure secure access it is recommended to use HTTPS protocol for API requests.</p>

<h2 id="api-endpoints">API Endpoints</h2>

<p>API endpoints define the connection point to your service, giving the external application access to DiamanteDesk data. API endpoints are prefixed with your domain name:</p>

<pre><code> http(s)://domainname/rest/api/{version}/desk/
</code></pre>

<h2 id="authentication">Authentication</h2>

<p>DiamanteDesk uses <a href="https://en.wikipedia.org/wiki/WS-Security">WSSE authentication</a> to ensure secure access to the third party applications via REST APIs. WSSE authentication in DiamanteDesk application, which is based on Symfony, is implemented by using this <a href="https://github.com/escapestudios/EscapeWSSEAuthenticationBundle">bundle</a>.</p>

<p>WSSE authentication is based on:</p>

<ul>
  <li>a username;</li>
  <li>a nonce (created to avoid replay attacks);</li>
  <li>a timestamp;</li>
  <li>the password digest (In DidamanteDesk the password digest is represented as API Key. To learn how to generate API key, please check the <strong>API Credentials</strong> article in the <strong>Integration</strong> section of DiamanteDesk documentation).</li>
</ul>

<h2 id="format">Format</h2>

<p>All the data in DiamanteDesk APIs is transmitted either in JSON or XML format with JSON being a default format.
The format can be specified either:</p>

<ul>
  <li>in the request header (Content-Type, Accept). <em>Note:</em> The MIME type shall be specified in header (application/json, application/xml).</li>
  <li>or specified in the URL.</li>
</ul>

<h2 id="pagination-sorting-filtering">Pagination, Sorting, Filtering</h2>

<h3 id="pagination">Pagination</h3>

<p>When a user performs a request to get a collection of entities or a certain entity, the data requested is returned in the response body. Depending on the requested items, objects or products, the list of results can contain thousands of results that should be paged through. The number of items per each page can be specified using page parameters. Paginated queries start at page 1 by default.</p>

<p>For example, if you set the page limit to 10 items and you need to retrieve items from 21 to 30 your request should contain such parameters: limit=10 and page=3.</p>

<p>When a user requests a list of certain entities, the server returns the results along with additional metadata, such as:</p>

<ul>
  <li>the general amount of entities, shown at the X-Total HTTP header;</li>
  <li>the links to the connected pages in the Link HTTP header. There are 4 types of such links:</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>next</td>
      <td>The URL to the following results page.</td>
    </tr>
    <tr>
      <td>last</td>
      <td>The URL to the last results page.</td>
    </tr>
    <tr>
      <td>first</td>
      <td>The URL to the first results page.</td>
    </tr>
    <tr>
      <td>prev</td>
      <td>The URL to the previous results page.</td>
    </tr>
  </tbody>
</table>

<p>Take a look at the example, containing such headers:</p>

<pre><code>HTTP/1.1 200 OK

Link: &lt;http://hostname/api/rest/latest/desk/branches?limit=25&amp;page=2&gt;; rel="next", &lt;http://hostname/api/rest/latest/desk/branches?limit=25&amp;page=5&gt;; rel="last"
X-Total: 110 
</code></pre>

<h3 id="sorting">Sorting</h3>

<p>The results can be sorted according to the <strong>sort</strong> and <strong>order</strong> GET parameters, included in the URL. The <strong>sort</strong> parameter performs the sorting according to the property name of an entity, <strong>order</strong> parameter may be set either to <strong>asc</strong> (ascending) or <strong>desc</strong> (descending).</p>

<h3 id="filtering">Filtering</h3>

<p>Filtering can be performed according to any parameter of the corresponding entity. For example, to filter the branch by its key, add “key=PO” parameter to the URL.</p>

<p>If the value is specified for string property, the search is performed for any occurrence, meaning the result will return PO, DPO, DPOD, etc. If the value is specified for numeric property the search is performed for equal value.</p>

<p>To filter the results by the time when a certain entity or entities were created or updated, the following parameters should be used:</p>

<ul>
  <li>createdBefore</li>
  <li>createdAfter</li>
  <li>updatedBefore</li>
  <li>updatedAfter</li>
</ul>

<h2 id="error-handling">Error Handling</h2>

<p>When the fault occurs within the application or on a server side, the server returns the corresponding status code followed by the message, indicating the root cause in the response body.</p>

<p>Here are the status codes of the errors that may occur when working with DiamanteDesk application.</p>

<table>
  <thead>
    <tr>
      <th>Status Code</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>400</strong></td>
      <td style="text-align: left">Validation failed and the request provided by the client was incorrect or distorted and the server could not understand it.</td>
    </tr>
    <tr>
      <td><strong>401</strong></td>
      <td style="text-align: left">Such error occurs when a user attempts to access a page or resource that requires authentication. To resolve this issue, correct log in details shall be provided.</td>
    </tr>
    <tr>
      <td><strong>403</strong></td>
      <td style="text-align: left">Authorization issue, meaning that a user has not been granted permission to access specific page or method.</td>
    </tr>
    <tr>
      <td><strong>404</strong></td>
      <td style="text-align: left">This error means that the server could not process client request with the reason for that described in the error message.</td>
    </tr>
    <tr>
      <td><strong>500</strong></td>
      <td style="text-align: left">Internal server error. This status code indicates that this is not a client-side issue, meaning that the problem occurred on the server side rather than in DiamanteDesk application.</td>
    </tr>
  </tbody>
</table>

<p>Take a look at the example of a 404 error below:</p>

<pre><code>POST /diamantedesk-1.0/web/api/rest/latest/desk/branches HTTP/1.1

{
"name": "Test Branch",
"description": "Test Description",
"tags": [
    "Test Tag",
    "TB1"
],
"key": "BRANCHTEST"
}

HTTP/1.1 404 Not Found

{
"error": "Branch key already exists. Please, provide another one."
}
</code></pre>

<h2 id="resources">Resources</h2>

<p>REST APIs are necessary when DiamanteDesk is integrated into another application and when interactions with the DiamanteDesk server shall be scripted.</p>

<blockquote>
  <p>NOTE: Here are the values of the variables API methods:</p>

  <table>
    <thead>
      <tr>
        <th style="text-align: left">Variable</th>
        <th style="text-align: left">Requirements</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align: left">{version}</td>
        <td style="text-align: left">latest, v1</td>
      </tr>
      <tr>
        <td style="text-align: left">{_format}</td>
        <td style="text-align: left">xml, json</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<h3 id="branches">Branches</h3>

<h6 id="get-retrieve-the-list-of-all-branches">GET: Retrieve the list of all branches</h6>

<pre><code>GET /api/rest/{version}/desk/branches
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>[
   {
       "created_at": "2015-07-17T11:25:21+0000",
       "description": "branchDescription1",
       "id": 1,
       "key": "BRANCHB",
       "name": "branchName1",
       "updated_at": "2015-07-17T11:25:21+0000"
   },
   {
       "created_at": "2015-07-17T11:25:21+0000",
       "description": "branchDescription2",
       "id": 2,
       "key": "BRANCHC",
       "name": "branchName2",
       "updated_at": "2015-07-17T11:25:21+0000"
   }
]  **Status Code:** 404 (Not Found)
</code></pre>

<p><em>Response body:</em></p>

<pre><code>{
   "error": "Branch loading failed. Branch not found."
}
</code></pre>

<h6 id="get-retrieve-a-branch-by-id">GET: Retrieve a branch by ID</h6>

<pre><code>GET /api/rest/{version}/desk/branches/{id}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "created_at": "2015-07-17T11:25:36+0000",
   "description": "Test Description",
   "id": 11,
   "key": "BRANCHTEST",
   "name": "Test Branch",
   "updated_at": "2015-07-17T11:25:36+0000"
}
</code></pre>

<h6 id="post-create-a-new-branch">POST: Create a new branch</h6>

<pre><code>POST /api/rest/{version}/desk/branches
</code></pre>

<p><strong>Parameters</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Note</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Specify the name of a new branch.</td>
      <td style="text-align: left">Minimum length is 2 letters.</td>
    </tr>
    <tr>
      <td style="text-align: left">description</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left">Enter the description of a new branch, if necessary.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">tags</td>
      <td style="text-align: left"><em>arrey of strings</em></td>
      <td style="text-align: left">Specify the tags appropriate for the new branch. To learn more about tagging in DiamanteDesk, please check the <strong>Tagging</strong> section in the <strong>User Guide</strong> section.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">key</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left">Enter the key of a new branch. Note that the key should be unique accross the whole system.</td>
      <td style="text-align: left">The branch key must contain only letters. Minimum length is 2 letters.</td>
    </tr>
  </tbody>
</table>

<p><em>Request example:</em></p>

<pre><code>{
  "name": "Test Branch",
  "description": "Test Description",
  "tags": [
       "Test Tag"
  ],
  "key": "BRANCHTEST"
}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 201 (Created)</p>

<p><em>Response body:</em></p>

<pre><code>{
  "created_at": "2015-07-17T11:25:36+0000",
  "description": "Test Description",
  "id": 11,
  "key": "BRANCHTEST",
  "name": "Test Branch",
  "tags": [
      "Test Tag"
  ],
  "updated_at": "2015-07-17T11:25:36+0000"
}
</code></pre>

<h6 id="put-patch-update-properties-of-a-certain-branch">PUT, PATCH: Update properties of a certain branch</h6>

<pre><code>PUT|PATCH /api/rest/{version}/desk/branches/{id}
</code></pre>

<p><em>Request example:</em></p>

<pre><code>{
   "name": "Test Branch PUT",
   "description": "Test Description",
   "tags": [
       "Test Tag"
   ]
}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "created_at": "2015-07-17T11:25:36+0000",
   "description": "Test Description",
   "id": 11,
   "key": "BRANCHTEST",
   "name": "Test Branch PUT",
   "tags": [
       "Test Tag"
   ],
   "updated_at": "2015-07-17T11:25:36+0000"
}
</code></pre>

<h6 id="delete-delete-a-branch-by-id">DELETE: Delete a branch by ID</h6>

<pre><code>DELETE /api/rest/{version}/desk/branches/{id}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 204 (No Content)</p>

<p><em>Response body:</em> null</p>

<h3 id="tickets">Tickets</h3>

<h6 id="get-retrieve-list-of-all-tickets">GET: Retrieve list of all tickets</h6>

<pre><code>GET /api/rest/{version}/desk/tickets
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>[
   {
       "assignee": 1,
       "branch": 1,
       "created_at": "2015-07-17T11:25:21+0000",
       "id": 1,
       "key": "BRANCHB-1",
       "priority": "medium",
       "reporter": "oro_1",
       "source": "phone",
       "status": "new",
       "subject": "ticketSubject1",
       "unique_id": {
           "id": "8d5fb1d682fecd97b0f4b6f050e2a8b9"
       },
       "updated_at": "2015-07-17T11:25:21+0000"
   },
   {
       "assignee": 1,
       "branch": 2,
       "created_at": "2015-07-17T11:25:21+0000",
       "id": 2,
       "key": "BRANCHC-1",
       "priority": "medium",
       "reporter": "oro_1",
       "source": "phone",
       "status": "open",
       "subject": "ticketSubject2",
       "unique_id": {
           "id": "9beddad8ecd692841ea8c8f8910b538b"
       },
       "updated_at": "2015-07-17T11:25:21+0000"
   }
]
</code></pre>

<h6 id="apirestversiondeskticketssearch">/api/rest/{version}/desk/tickets/search</h6>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Method</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>GET</strong></td>
      <td style="text-align: left">Retrieves list of Tickets found by the query. Ticket is searched by the subject and description. Performs filtering of tickets if provided with criteria as GET parameters. Time filtering parameters as well as paging/sorting configuration parameters can be found in \Diamante\DeskBundle\Api\Command\Filter\CommonFilterCommand class. Time filtering values should be converted to UTC.</td>
    </tr>
  </tbody>
</table>

<h6 id="get-retrieve-the-ticket-by-the-given-ticket-id">GET: Retrieve the ticket by the given ticket ID</h6>

<p>GET /api/rest/{version}/desk/tickets/{id}</p>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "branch": 1,
   "comments": [

   ],
   "created_at": "2015-07-17T11:25:47+0000",
   "description": "Test Description",
   "id": 12,
   "key": "BRANCHB-3",
   "priority": "medium",
   "reporter": "oro_1",
   "source": "phone",
   "status": "open",
   "subject": "Test Ticket",
   "unique_id": {
       "id": "4b1573586e00d7760babf2aa0bdb9cdc"
   },
   "updated_at": "2015-07-17T11:25:47+0000"
}
</code></pre>

<h6 id="post-create-a-new-ticket">POST: Create a new ticket</h6>

<pre><code>POST /api/rest/{version}/desk/tickets
</code></pre>

<p><strong>Parameters</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Note</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">branch</td>
      <td style="text-align: left"><em>integer</em></td>
      <td style="text-align: left"><strong>Required.</strong> Specify a branch name where the ticket should be created.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">subject</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Enter a short description of a new ticket.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">description</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Enter the detailed description of a new ticket.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">status</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> The available statuses are: <strong>New</strong>, <strong>Open</strong>, <strong>Pending</strong>, <strong>In progress</strong>, <strong>Closed</strong> and <strong>On Hold</strong>.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">priority</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Specify the priority of a new ticket. The available options are <strong>Low</strong>, <strong>Medium</strong> or <strong>High</strong>.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">source</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Every service user has 4 available options to contact the Help Desk team: by creating a request through a <strong>Web</strong> form or through the embedded form on a website (optional), as an <strong>Email</strong> notification, via a <strong>Phone</strong> call. Specify the corresponding source of a ticket.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">reporter</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> The reporter is an administrator who can create a ticket for any customer.</td>
      <td style="text-align: left">The name of the reporter must contain only letters.</td>
    </tr>
  </tbody>
</table>

<p><em>Request example:</em></p>

<pre><code>{
   "branch": 1,
   "subject": "Test Ticket",
   "description": "Test Description",
   "status": "open",
   "priority": "medium",
   "source": "phone",
   "reporter": "diamante_10"
} **Response**
</code></pre>

<p><strong>Status Code:</strong> 201 (Created)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "branch": 1,
   "comments": [

   ],
   "created_at": "2015-07-17T11:25:29+0000",
   "description": "Test Description",
   "id": 11,
   "key": "BRANCHB-2",
   "priority": "medium",
   "reporter": "diamante_10",
   "source": "phone",
   "status": "open",
   "subject": "Test Ticket",
   "unique_id": {
       "id": "80297640927352a82f2b7c1a8c97d10b"
   },
   "updated_at": "2015-07-17T11:25:29+0000"
}
</code></pre>

<h6 id="put-patch-update-certain-properties-of-the-ticket-by-id">PUT, PATCH: Update certain properties of the ticket by ID</h6>

<pre><code>PUT, PATCH /api/rest/{version}/desk/tickets/{id}
</code></pre>

<p><em>Request example:</em></p>

<pre><code>{
   "subject": "Test Ticket Updated PUT"
}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "branch": 1,
   "comments": [

   ],
   "created_at": "2015-07-17T11:25:29+0000",
   "description": "Test Description",
   "id": 11,
   "key": "BRANCHB-2",
   "priority": "medium",
   "reporter": "oro_1",
   "source": "phone",
   "status": "open",
   "subject": "Test Ticket Updated PUT",
   "unique_id": {
       "id": "4b1573586e00d7760babf2aa0bdb9cdc"
   },
   "updated_at": "2015-07-17T11:25:47+0000"
}
</code></pre>

<h6 id="delete-delete-the-ticket-by-id">DELETE: Delete the ticket by ID</h6>

<pre><code>DELETE /api/rest/{version}/desk/tickets/{id}   
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 204 (No Content)</p>

<p><em>Response body:</em> null</p>

<p><strong>Status Code:</strong> 404 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
"error": "Ticket loading failed, ticket not found."
}   
</code></pre>

<h6 id="get-retrieve-ticket-by-the-given-ticket-key">GET: Retrieve ticket by the given ticket key</h6>

<p>GET /api/rest/{version}/desk/tickets/{key}</p>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "branch": 1,
   "comments": [

   ],
   "created_at": "2015-07-17T11:25:29+0000",
   "description": "Test Description",
   "id": 11,
   "key": "BRANCHB-2",
   "priority": "medium",
   "reporter": "oro_1",
   "source": "phone",
   "status": "open",
   "subject": "Test Ticket",
   "unique_id": {
       "id": "4b1573586e00d7760babf2aa0bdb9cdc"
   },
   "updated_at": "2015-07-17T11:25:47+0000"
}
</code></pre>

<h6 id="put-patch-update-certain-properties-of-a-ticket-by-the-ticket-key">PUT, PATCH: Update certain properties of a ticket by the ticket key</h6>

<pre><code>PUT, PATCH /api/rest/{version}/desk/tickets/{key}
</code></pre>

<p><em>Request example:</em></p>

<pre><code>{
   "subject": "Test Ticket Updated PUT by key"
}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "branch": 1,
   "comments": [

   ],
   "created_at": "2015-07-17T11:25:29+0000",
   "description": "Test Description",
   "id": 11,
   "key": "BRANCHB-2",
   "priority": "medium",
   "reporter": "diamante_10",
   "source": "phone",
   "status": "open",
   "subject": "Test Ticket Updated PUT by key",
   "unique_id": {
       "id": "80297640927352a82f2b7c1a8c97d10b"
   },
   "updated_at": "2015-07-17T11:25:29+0000"
}
</code></pre>

<h6 id="delete-delete-the-ticket-by-the-ticket-key">DELETE: Delete the ticket by the ticket key</h6>

<pre><code>DELETE /api/rest/{version}/desk/tickets/{key} 
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 204 (No Content)</p>

<p><em>Response body:</em> null</p>

<p><strong>Status Code:</strong> 404 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
"error": "Ticket loading failed, ticket not found."
}   
</code></pre>

<h6 id="get-retrieve-the-list-of-ticket-attachments-by-ticket-id">GET: Retrieve the list of ticket attachments by ticket ID</h6>

<pre><code>GET /api/rest/{version}/desk/tickets/{id}/attachments
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>[
   {
       "id": 15,
       "created_at": "2015-07-17T11:25:53+0000",
       "updated_at": "2015-07-17T11:25:53+0000",
       "file": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/file\/450385ca08c7cfe5b507ad85f3a17428",
           "filename": "test.jpg"
       },
       "thumbnails": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/thumbnail\/450385ca08c7cfe5b507ad85f3a17428",
           "filename": "450385ca08c7cfe5b507ad85f3a17428.png"
       }
   }
]
</code></pre>

<h6 id="get-retrieve-ticket-attachments-by-attachment-id">GET: Retrieve ticket attachments by attachment ID</h6>

<pre><code>GET /api/rest/{version}/desk/tickets/{ticketId}/attachments/{attachmentId}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "id": 15,
   "created_at": "2015-07-17T11:25:53+0000",
   "updated_at": "2015-07-17T11:25:53+0000",
   "file": {
       "url": "http:\/\/localhost\/desk\/attachments\/download\/file\/450385ca08c7cfe5b507ad85f3a17428",
       "filename": "test.jpg"
    },
   "thumbnails": {
       "url": "http:\/\/localhost\/desk\/attachments\/download\/thumbnail\/450385ca08c7cfe5b507ad85f3a17428",
       "filename": "450385ca08c7cfe5b507ad85f3a17428.png"
   }
}
</code></pre>

<h6 id="post-add-attachment-to-the-ticket">POST: Add attachment to the ticket</h6>

<pre><code>POST /api/rest/{version}/desk/tickets/{ticketId}/attachments
</code></pre>

<p><em>Request example:</em></p>

<pre><code>{
   "attachmentsInput": [
       { 
   BASE_64 encoded file
       }
   ]
}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 201 (Created)</p>

<p><em>Response body:</em></p>

<pre><code>[
   {
       "id": 15,
       "created_at": "2015-07-17T11:25:53+0000",
       "updated_at": "2015-07-17T11:25:53+0000",
       "file": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/file\/450385ca08c7cfe5b507ad85f3a17428",
           "filename": "test.jpg"
       },
       "thumbnails": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/thumbnail\/450385ca08c7cfe5b507ad85f3a17428",
           "filename": "450385ca08c7cfe5b507ad85f3a17428.png"
       }
   }
]
</code></pre>

<h6 id="delete-remove-attachment-from-the-ticket">DELETE: Remove Attachment from the ticket</h6>

<pre><code>DELETE /api/rest/{version}/desk/tickets/{ticketId}/attachments/{attachmentId}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 204 (No Content)</p>

<p><em>Response body:</em> null</p>

<p><strong>Status Code:</strong> 404 (Not Found)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "error": "Attachment loading failed. Ticket has no such attachment."
}
</code></pre>

<h6 id="get-retrieve-personal-data-based-on-the-provided-ticket-id">GET: Retrieve personal data based on the provided ticket ID</h6>

<pre><code>GET /api/rest/{version}/desk/ticket/{id}/assignee
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 201 (Created)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "email": "pol.vova@gmail.com",
   "name": "asdasd dasdasd",
   "id": "oro_1"
}
</code></pre>

<h3 id="comments">Comments</h3>

<h6 id="get-retrieve-the-list-of-all-comments">GET: Retrieve the list of all comments</h6>

<pre><code>GET /api/rest/{version}/desk/comments
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>[
   {
       "attachments": [

       ],
       "author": 1,
       "author_type": "oro",
       "content": "commentContent1-1",
       "created_at": "2015-07-17T11:25:22+0000",
       "id": 1,
       "private": false,
       "ticket": 1,
       "updated_at": "2015-07-17T11:25:22+0000"
   },
   {
       "attachments": [

       ],
       "author": 1,
       "author_type": "oro",
       "content": "commentContent1-2",
       "created_at": "2015-07-17T11:25:22+0000",
       "id": 2,
       "private": false,
       "ticket": 1,
       "updated_at": "2015-07-17T11:25:22+0000"
    }
]
</code></pre>

<h6 id="get-retrieve-the-comment-by-the-given-comment-id">GET: Retrieve the comment by the given comment ID</h6>

<pre><code>GET /api/rest/{version}/desk/comments/{id}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "author": 10,
   "author_type": "diamante",
   "content": "Test Comment",
   "created_at": "2015-07-17T11:25:22+0000",
   "id": 101,
   "private": false,
   "ticket": 1,
   "updated_at": "2015-07-17T11:25:22+0000"
}
</code></pre>

<h6 id="post-add-a-new-comment-to-the-ticket">POST: Add a new comment to the ticket.</h6>

<pre><code>POST /api/rest/{version}/desk/comments
</code></pre>

<p><strong>Parameters</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Note</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">content</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Add your comment into this section.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">ticket</td>
      <td style="text-align: left"><em>integer</em></td>
      <td style="text-align: left"><strong>Required.</strong> Provide the ID of a ticket where the comment is added.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">author</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Specify the name of a user who adds the comment to the ticket.</td>
      <td style="text-align: left">The name of an author must contain only letters.</td>
    </tr>
    <tr>
      <td style="text-align: left">ticketStatus</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Specify the status of a ticket after the new comment is added to it. The available statuses are: <strong>New</strong>, <strong>Open</strong>, <strong>Pending</strong>, <strong>In progress</strong>, <strong>Closed</strong> and <strong>On Hold</strong>.</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<p><em>Request example:</em></p>

<pre><code>{
   "content": "Test Comment",
   "ticket": 1,
   "author": "diamante_10",
   "ticketStatus": "new"
}   
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 201 (Created)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "author": 10,
   "author_type": "diamante",
   "content": "Test Comment",
   "created_at": "2015-07-17T11:25:22+0000",
   "id": 101,
   "private": false,
   "ticket": 1,
   "updated_at": "2015-07-17T11:25:22+0000"
}
</code></pre>

<h6 id="put-patch-update-certain-properties-of-the-comment-be-the-comment-id">PUT, PATCH: Update certain properties of the comment be the comment ID</h6>

<pre><code>PUT|PATCH /api/rest/{version}/desk/comments/{id}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Request example:</em></p>

<pre><code>{
   "content": "Test Comment Updated PUT",
   "ticketStatus": "closed"
}
</code></pre>

<p><em>Response body:</em></p>

<pre><code>{
   "attachments": [

   ],
   "author": 10,
   "author_type": "diamante",
   "content": "Test Comment Updated PUT",
   "created_at": "2015-07-17T11:25:22+0000",
   "id": 101,
   "private": false,
   "ticket": 1,
   "updated_at": "2015-07-17T11:25:22+0000"
}
</code></pre>

<h6 id="delete-delete-a-ticket-comment-by-the-comment-id">DELETE: Delete a ticket comment by the comment ID</h6>

<pre><code>DELETE /api/rest/{version}/desk/comments/{id}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 204 (No Content)</p>

<p><em>Response body:</em> null</p>

<p><strong>Status Code:</strong> 404 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
"error": "Comment loading failed, comment not found."
}  
</code></pre>

<h6 id="get-retrieve-the-information-about-the-comment-author-based-on-the-provided-comment-id">GET: Retrieve the information about the comment author based on the provided comment ID</h6>

<pre><code>GET /api/rest/{version}/desk/comment/{id}/author
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "email": "pol.vova@gmail.com",
   "name": "asdasd dasdasd",
   "id": "oro_1"
}
</code></pre>

<h6 id="get-retrieve-all-comment-attachments">GET: Retrieve all comment attachments</h6>

<pre><code>GET /api/rest/{version}/desk/comments/{id}/attachments
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>[
   {
       "id": 12,
       "created_at": "2015-07-17T11:25:27+0000",
       "updated_at": "2015-07-17T11:25:27+0000",
       "file": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/file\/61fcb86ab5a53db412b2f3823f8a20ac",
           "filename": "test.jpg"
       },
       "thumbnails": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/thumbnail\/61fcb86ab5a53db412b2f3823f8a20ac",
           "filename": "61fcb86ab5a53db412b2f3823f8a20ac.png"
       }
   }
]
</code></pre>

<h6 id="retrieve-comment-attachments-by-the-attachment-id">Retrieve comment attachments by the attachment ID</h6>

<pre><code>GET /api/rest/{version}/desk/comments/{commentId}/attachments/{attachmentId}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "id": 12,
   "created_at": "2015-07-17T11:25:27+0000",
   "updated_at": "2015-07-17T11:25:27+0000",
   "file": {
       "url": "http:\/\/localhost\/desk\/attachments\/download\/file\/61fcb86ab5a53db412b2f3823f8a20ac",
       "filename": "test.jpg"
   },
   "thumbnails": {
       "url": "http:\/\/localhost\/desk\/attachments\/download\/thumbnail\/61fcb86ab5a53db412b2f3823f8a20ac",
       "filename": "61fcb86ab5a53db412b2f3823f8a20ac.png"
   }
}
</code></pre>

<h6 id="post-add-attachment-to-the-comment">POST: Add attachment to the comment</h6>

<pre><code>POST /api/rest/{version}/desk/comments/{commentId}/attachments
</code></pre>

<p><em>Request example:</em></p>

<pre><code>{
   "attachmentsInput": [
       { 
   BASE_64 encoded file
       }
   ]
}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 201 (Created)</p>

<p><em>Response body:</em></p>

<pre><code>[
   {
       "id": 12,
       "created_at": "2015-07-17T11:25:27+0000",
       "updated_at": "2015-07-17T11:25:27+0000",
       "file": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/file\/61fcb86ab5a53db412b2f3823f8a20ac",
           "filename": "test.jpg"
    },
       "thumbnails": {
           "url": "http:\/\/localhost\/desk\/attachments\/download\/thumbnail\/61fcb86ab5a53db412b2f3823f8a20ac",
           "filename": "61fcb86ab5a53db412b2f3823f8a20ac.png"
       }
   }
] 
</code></pre>

<h6 id="delete-remove-the-attachment-from-the-comment-by-the-attachment-id">DELETE: Remove the attachment from the comment by the attachment ID</h6>

<pre><code>DELETE /api/rest/{version}/desk/comments/{commentId}/attachments/{attachmentId}
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 204 (No Content)</p>

<p><em>Response body:</em> null</p>

<p><strong>Status Code:</strong> 404 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
"error": "Attachment loading failed. Comment has no such attachment."
} 
</code></pre>

<h3 id="users">Users</h3>

<h6 id="get-retrieve-the-list-of-all-users">GET: Retrieve the list of all users</h6>

<pre><code>GET /api/rest/{version}/desk/users
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code> [
     {
        "id": 10,
        "email": "test1@test.com",
        "first_name": "Test",
        "last_name": "test"
     },
     {
        "id": 11,
        "email": "1437135532dummy-test-email-address@test-server.local",
        "first_name": "John",
        "last_name": "Dou"
     }
]
</code></pre>

<h6 id="post-create-a-new-user">POST: Create a new user</h6>

<pre><code>POST /api/rest/{version}/desk/users
</code></pre>

<p><strong>Parameters</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">firstName</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Provide the first name of a new user.</td>
    </tr>
    <tr>
      <td style="text-align: left">lastName</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Provide the last name of a new user.</td>
    </tr>
    <tr>
      <td style="text-align: left">email</td>
      <td style="text-align: left"><em>string</em></td>
      <td style="text-align: left"><strong>Required.</strong> Add an email of a new user. This email is going to be used for email notifications and password recovery.</td>
    </tr>
  </tbody>
</table>

<p><em>Request example:</em></p>

<pre><code>{
   "email": "1437135532dummy-test-email-address@test-server.local",
   "firstName": "John",
   "lastName": "Dou"
 } **Response**
</code></pre>

<p><strong>Status Code:</strong> 201 (Created)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "id": 11,
   "email": "1437135532dummy-test-email-address@test-server.local",
   "first_name": "John",
   "last_name": "Dou"
}
</code></pre>

<h6 id="get-retrieve-user-data">GET: Retrieve user data</h6>

<pre><code>GET /api/rest/{version}/desk/users/{email}/
</code></pre>

<p><strong>Response</strong></p>

<p><strong>Status Code:</strong> 200 (OK)</p>

<p><em>Response body:</em></p>

<pre><code>{
   "id": 11,
   "email": "1437135532dummy-test-email-address@test-server.local",
   "first_name": "John",
   "last_name": "Dou"
}
</code></pre>
